(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{393:function(s,n,a){"use strict";a.r(n);var t=a(4),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"第四篇-如何用高德地图api获取乡镇定位数据并点击位弹出坐标信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四篇-如何用高德地图api获取乡镇定位数据并点击位弹出坐标信息"}},[s._v("#")]),s._v(" 第四篇，如何用高德地图API获取乡镇定位数据并点击位弹出坐标信息！")]),s._v(" "),n("blockquote",[n("p",[s._v("作者："),n("a",{attrs:{href:"https://java.springsongs.cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("极光"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("本站地址："),n("a",{attrs:{href:"http://springsongs.cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://springsongs.cn"),n("OutboundLink")],1),s._v("\n在当今数字化时代，地图应用已成为各类公众号、小程序和网站的标配功能。本文将详细介绍如何使用高德地图API获取乡镇级别的定位数据，并实现点击地图标记弹出坐标信息的功能。")])]),s._v(" "),n("p",[n("img",{staticClass:"lazy",attrs:{alt:"image-20250716154023897","data-src":"http://springsongs.cn/images/image-20250716154023897.png",loading:"lazy"}})]),s._v(" "),n("h2",{attrs:{id:"一、准备工作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、准备工作"}},[s._v("#")]),s._v(" 一、准备工作")]),s._v(" "),n("h3",{attrs:{id:"_1-注册高德开发者账号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-注册高德开发者账号"}},[s._v("#")]),s._v(" 1. 注册高德开发者账号")]),s._v(" "),n("p",[s._v("首先访问"),n("a",{attrs:{href:"https://lbs.amap.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("高德开放平台"),n("OutboundLink")],1),s._v("，注册开发者账号并创建应用，获取API Key。")]),s._v(" "),n("h3",{attrs:{id:"_2-引入必要的js库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-引入必要的js库"}},[s._v("#")]),s._v(" 2. 引入必要的JS库")]),s._v(" "),n("p",[s._v("在HTML文件中引入高德地图JS API和相关插件：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<script src="https://webapi.amap.com/maps?v=1.4.15&key=你的Key&plugin=Map3D,AMap.DistrictSearch"><\/script>\n<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"><\/script>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"二、获取乡镇级行政区划数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、获取乡镇级行政区划数据"}},[s._v("#")]),s._v(" 二、获取乡镇级行政区划数据")]),s._v(" "),n("p",[s._v("高德地图提供了"),n("code",[s._v("AMap.DistrictSearch")]),s._v("插件用于行政区划查询：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("       let MapInfo; // 全局地图实例\n        // 初始化地图\n        function initMap() {\n            const opts = {\n                subdistrict: 2,  // 获取乡镇级数据\n                extensions: 'all',\n                level: 'city'\n            };\n\n            // 查询灵川县及下属乡镇数据\n            const district = new AMap.DistrictSearch(opts);\n            district.search('灵川县', function (status, result) {\n                if (status !== 'complete' || !result.districtList[0]) {\n                    console.error('行政区查询失败');\n                    return;\n                }\n\n                const countyData = result.districtList[0];\n                const townships = countyData.districts || [];\n                const countyBounds = countyData.boundaries || [];\n\n                // 1. 创建3D地图（带灵川县边界遮罩）\n                create3DMap(countyBounds);\n\n            });\n        }\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h2",{attrs:{id:"三、创建3d地图并设置遮罩"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、创建3d地图并设置遮罩"}},[s._v("#")]),s._v(" 三、创建3D地图并设置遮罩")]),s._v(" "),n("p",[s._v("利用获取到的边界数据创建3D地图：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 创建3D地图并设置遮罩\nfunction create3DMap(boundaries) {\n            MapInfo = new AMap.Map('AllmapContainer', {\n                mask: boundaries.map(boundary => [boundary]), // 设置遮罩区域\n                viewMode: '3D',\n                center: [110.4049, 25.28092],\n                zoom: 10.5,\n                pitch: 40, // 3D倾斜角度\n                layers: [\n                    new AMap.TileLayer.RoadNet(),\n                    new AMap.TileLayer.Satellite() // 卫星图层\n                ],\n                mapStyle: \"amap://styles/1111111111111111111111111111111111\" // 自定义样式\n            });\n\n            // 添加3D地形厚度效果（可选）\n            const object3Dlayer = new AMap.Object3DLayer();\n            MapInfo.add(object3Dlayer);\n            const wall = new AMap.Object3D.Wall({\n                path: boundaries[0], // 取第一条边界\n                height: -8000,\n                color: '#0478d7',\n                transparent: true\n            });\n            object3Dlayer.add(wall);\n            addMarkers(locationPoints);\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h2",{attrs:{id:"四、添加标记点并实现点击弹窗"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、添加标记点并实现点击弹窗"}},[s._v("#")]),s._v(" 四、添加标记点并实现点击弹窗")]),s._v(" "),n("h3",{attrs:{id:"_1-生成随机测试点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-生成随机测试点"}},[s._v("#")]),s._v(" 1. 生成随机测试点")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const locationPoints = Array.from({ length: 20 }, (_, i) => {\n            const randomLng = 110.40 + Math.random() * 0.2;  // 经度在110.40 ~ 110.60\n            const randomLat = 25.26 + Math.random() * 0.2;   // 纬度在25.26 ~ 25.46\n            return {\n                name: `随机点${i + 1}`,\n                coord: [parseFloat(randomLng.toFixed(6)), parseFloat(randomLat.toFixed(6))],\n                description: `这是第${i + 1}个随机生成的点，位于灵川县区域内。`\n            };\n        });\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"_2-添加标记点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加标记点"}},[s._v("#")]),s._v(" 2. 添加标记点")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function addMarkers(points) {\n    points.forEach(item => {\n        const marker = new AMap.Marker({\n            map: MapInfo,\n            position: item.coord,\n            title: item.name,\n            label: {\n                content: item.name,\n                offset: new AMap.Pixel(0, -30)\n            }\n        });\n\n        marker.on('click', function() {\n            showInfoWindow(item);\n        });\n    });\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h3",{attrs:{id:"_3-信息弹窗实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-信息弹窗实现"}},[s._v("#")]),s._v(" 3. 信息弹窗实现")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('function showInfoWindow(point) {\n    const infoWindow = new AMap.InfoWindow({\n        content: `<div style="padding:10px;min-width:150px;">\n            <h4 style="margin:0 0 5px 0;">${point.name}</h4>\n            <p style="margin:3px 0;">坐标: ${point.coord[0].toFixed(6)}, ${point.coord[1].toFixed(6)}</p>\n            <p style="margin:3px 0;">${point.description}</p>\n            <p style="margin:3px 0;color:#666;font-size:12px;">\n                点击时间: ${new Date().toLocaleTimeString()}\n            </p>\n        </div>`,\n        offset: new AMap.Pixel(0, -30)\n    });\n    infoWindow.open(MapInfo, point.coord);\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"五、完整代码集成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、完整代码集成"}},[s._v("#")]),s._v(" 五、完整代码集成")]),s._v(" "),n("p",[s._v("将上述代码整合到HTML文件中，确保在页面加载时初始化地图：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("window.onload = initMap;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"六、应用场景与扩展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六、应用场景与扩展"}},[s._v("#")]),s._v(" 六、应用场景与扩展")]),s._v(" "),n("ol",[n("li",[n("strong",[s._v("公众号地图应用")]),s._v("：可用于展示乡镇服务网点、旅游景点等")]),s._v(" "),n("li",[n("strong",[s._v("数据可视化")]),s._v("：结合业务数据展示区域分布")]),s._v(" "),n("li",[n("strong",[s._v("交互增强")]),s._v("：可扩展为点击标记后导航或查看更多详情")])]),s._v(" "),n("h2",{attrs:{id:"七、注意事项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#七、注意事项"}},[s._v("#")]),s._v(" 七、注意事项")]),s._v(" "),n("ol",[n("li",[s._v("高德地图API有调用频率限制，生产环境需注意")]),s._v(" "),n("li",[s._v("3D地图效果在移动端可能有性能问题")]),s._v(" "),n("li",[s._v("安全起见，应将API Key放在后端获取")])]),s._v(" "),n("p",[s._v("通过以上步骤，你就可以在自己的公众号或网站中实现专业的乡镇级地图展示和交互功能了。高德地图API功能强大，开发者可以根据实际需求进一步探索更多高级功能。")])])}),[],!1,null,null,null);n.default=e.exports}}]);