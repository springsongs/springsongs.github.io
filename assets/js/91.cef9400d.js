(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{389:function(n,s,a){"use strict";a.r(s);var t=a(4),e=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"第五篇-如何用高德地图添加缩放按钮、比例尺、鹰眼图、工具栏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第五篇-如何用高德地图添加缩放按钮、比例尺、鹰眼图、工具栏"}},[n._v("#")]),n._v(" 第五篇，如何用高德地图添加缩放按钮、比例尺、鹰眼图、工具栏！")]),n._v(" "),s("blockquote",[s("p",[n._v("作者："),s("a",{attrs:{href:"https://java.springsongs.cn",target:"_blank",rel:"noopener noreferrer"}},[n._v("极光"),s("OutboundLink")],1)]),n._v(" "),s("p",[n._v("本站地址："),s("a",{attrs:{href:"http://springsongs.cn",target:"_blank",rel:"noopener noreferrer"}},[n._v("http://springsongs.cn"),s("OutboundLink")],1),n._v("\n在GIS可视化应用中，"),s("strong",[n._v("行政区边界遮罩")]),n._v("与"),s("strong",[n._v("3D地图可视化")]),n._v("是常见需求。本文结合"),s("strong",[n._v("高德地图API")]),n._v("，以"),s("strong",[n._v("灵川县")]),n._v("为例，详细拆解完整开发过程，并附带关键代码，适合开发者学习和快速集成。")])]),n._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image-20250716172508962","data-src":"http://springsongs.cn/images/image-20250716172508962.png",loading:"lazy"}})]),n._v(" "),s("hr"),n._v(" "),s("h2",{attrs:{id:"🎯-一、项目效果概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🎯-一、项目效果概述"}},[n._v("#")]),n._v(" 🎯 一、项目效果概述")]),n._v(" "),s("ul",[s("li",[n._v("灵川县及下属乡镇"),s("strong",[n._v("边界遮罩")]),n._v("展示")]),n._v(" "),s("li",[n._v("支持"),s("strong",[n._v("3D倾斜视角")]),n._v("与"),s("strong",[n._v("卫星图层")])]),n._v(" "),s("li",[n._v("动态生成与展示"),s("strong",[n._v("地理标记点")])]),n._v(" "),s("li",[n._v("集成"),s("strong",[n._v("缩放控件")]),n._v("、"),s("strong",[n._v("鹰眼控件")]),n._v("、"),s("strong",[n._v("测距工具")])]),n._v(" "),s("li",[n._v("实现"),s("strong",[n._v("地图截图")]),n._v("功能")])]),n._v(" "),s("hr"),n._v(" "),s("h2",{attrs:{id:"🛠️-二、技术栈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🛠️-二、技术栈"}},[n._v("#")]),n._v(" 🛠️ 二、技术栈")]),n._v(" "),s("ul",[s("li",[n._v("高德地图 JS API v1.4.15")]),n._v(" "),s("li",[n._v("Turf.js （用于计算几何中心等）")]),n._v(" "),s("li",[n._v("html2canvas （实现截图）")]),n._v(" "),s("li",[n._v("原生 JavaScript")])]),n._v(" "),s("hr"),n._v(" "),s("h2",{attrs:{id:"📍-三、完整开发步骤与关键代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#📍-三、完整开发步骤与关键代码"}},[n._v("#")]),n._v(" 📍 三、完整开发步骤与关键代码")]),n._v(" "),s("h3",{attrs:{id:"_1️⃣-加载地图与核心插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1️⃣-加载地图与核心插件"}},[n._v("#")]),n._v(" 1️⃣ 加载地图与核心插件")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('htmlCopyEdit<script src="https://webapi.amap.com/maps?v=1.4.15&key=你的key&plugin=Map3D,AMap.ControlBar,AMap.DistrictSearch,AMap.ToolBar,AMap.RangingTool,AMap.HawkEye,AMap.OverView"><\/script>\n<script src="https://unpkg.com/@turf/turf@6/turf.min.js"><\/script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"><\/script>\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("blockquote",[s("p",[n._v("插件按需加载，避免性能浪费。")])]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"_2️⃣-获取灵川县边界数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2️⃣-获取灵川县边界数据"}},[n._v("#")]),n._v(" 2️⃣ 获取灵川县边界数据")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("\t\tlet MapInfo; // 全局地图实例\n\n        const locationPoints = Array.from({ length: 20 }, (_, i) => {\n            const randomLng = 110.40 + Math.random() * 0.2;  // 经度在110.40 ~ 110.60\n            const randomLat = 25.26 + Math.random() * 0.2;   // 纬度在25.26 ~ 25.46\n            return {\n                name: `随机点${i + 1}`,\n                coord: [parseFloat(randomLng.toFixed(6)), parseFloat(randomLat.toFixed(6))],\n                description: `这是第${i + 1}个随机生成的点，位于灵川县区域内。`\n            };\n        });\n        // 初始化地图\n        function initMap() {\n            const opts = {\n                subdistrict: 2,  // 获取乡镇级数据\n                extensions: 'all',\n                level: 'city'\n            };\n\n            // 查询灵川县及下属乡镇数据\n            const district = new AMap.DistrictSearch(opts);\n            district.search('灵川县', function (status, result) {\n                if (status !== 'complete' || !result.districtList[0]) {\n                    console.error('行政区查询失败');\n                    return;\n                }\n\n                const countyData = result.districtList[0];\n                const townships = countyData.districts || [];\n                const countyBounds = countyData.boundaries || [];\n\n                // 1. 创建3D地图（带灵川县边界遮罩）\n                create3DMap(countyBounds);\n\n            });\n        }\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br")])]),s("blockquote",[s("p",[n._v("使用 "),s("code",[n._v("AMap.DistrictSearch")]),n._v(" 获取行政区边界后，传入3D地图生成函数。")])]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"_3️⃣-创建3d地图与边界遮罩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3️⃣-创建3d地图与边界遮罩"}},[n._v("#")]),n._v(" 3️⃣ 创建3D地图与边界遮罩")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("// 创建3D地图并设置遮罩\nfunction create3DMap(boundaries) {\n            MapInfo = new AMap.Map('AllmapContainer', {\n                mask: boundaries.map(boundary => [boundary]), // 设置遮罩区域\n                viewMode: '3D',\n                center: [110.4049, 25.28092],\n                zoom: 10.5,\n                pitch: 40, // 3D倾斜角度\n                layers: [\n                    new AMap.TileLayer.RoadNet(),\n                    new AMap.TileLayer.Satellite() // 卫星图层\n                ],\n                mapStyle: \"amap://styles/859154f30ffaec4521b959815da8902d\" // 自定义样式\n            });\n\n            // 添加缩放控件\n            MapInfo.addControl(new AMap.ControlBar({\n                showZoomBar: true,      // 显示缩放按钮\n                showControlButton: true,// 显示3D控件\n                position: {\n                    right: '10px',\n                    top: '10px'\n                }\n            }));\n\n            // 添加鹰眼图\n            MapInfo.addControl(new AMap.OverView({\n                visible: true,  // 默认显示\n                isOpen: true,   // 默认展开\n                tileLayer: new AMap.TileLayer.Satellite() // 鹰眼图使用卫星图\n            }));\n\n\n            // 添加工具栏\n            const toolBar = new AMap.ToolBar({\n                position: {\n                    top: '200px',\n                    right: '10px'\n                },\n                liteStyle: true // 简洁模式\n            });\n            MapInfo.addControl(toolBar);\n            // 3. 显式添加Zoom控件（可选但推荐）\n            //MapInfo.addControl(new AMap.Zoom());\n            // 添加测距工具\n            const rangeTool = new AMap.RangingTool(MapInfo);\n\n            // 将测距按钮添加到工具栏\n            document.querySelector('.amap-toolbar').innerHTML +=\n                '<div class=\"amap-distance-marker\" title=\"距离测量\">测距</div>' +\n                '<div class=\"amap-screenshot\" title=\"地图截图\">截图</div>';\n\n            // 绑定测距按钮点击事件\n            document.querySelector('.amap-distance-marker').addEventListener('click', function () {\n                rangeTool.turnOn(); // 开启测距\n            });\n\n            // 绑定截图按钮点击事件\n            document.querySelector('.amap-screenshot').addEventListener('click', function () {\n                takeScreenshot();\n            });\n\n            // 添加3D地形厚度效果（可选）\n            const object3Dlayer = new AMap.Object3DLayer();\n            MapInfo.add(object3Dlayer);\n            const wall = new AMap.Object3D.Wall({\n                path: boundaries[0], // 取第一条边界\n                height: -8000,\n                color: '#0478d7',\n                transparent: true\n            });\n            object3Dlayer.add(wall);\n            addMarkers(locationPoints);\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br")])]),s("blockquote",[s("p",[s("strong",[n._v("mask参数")]),n._v("可实现“仅显示指定区域”的聚焦效果。")])]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"_4️⃣-添加常用控件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4️⃣-添加常用控件"}},[n._v("#")]),n._v(" 4️⃣ 添加常用控件")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("// 缩放与3D控件\nMapInfo.addControl(new AMap.ControlBar({\n    showZoomBar: true,\n    showControlButton: true\n}));\n\n// 鹰眼控件\nMapInfo.addControl(new AMap.OverView({\n    visible: true,\n    isOpen: true\n}));\n\n// 工具栏\nconst toolBar = new AMap.ToolBar();\nMapInfo.addControl(toolBar);\n\n// 测距工具\nconst rangeTool = new AMap.RangingTool(MapInfo);\n\n// 将测距按钮添加到工具栏\ndocument.querySelector('.amap-toolbar').innerHTML +=\n                '<div class=\"amap-distance-marker\" title=\"距离测量\">测距</div>' +\n                '<div class=\"amap-screenshot\" title=\"地图截图\">截图</div>';\n\n// 绑定测距按钮点击事件\ndocument.querySelector('.amap-distance-marker').addEventListener('click', function () {\n                rangeTool.turnOn(); // 开启测距\n});\n\n// 绑定截图按钮点击事件\ndocument.querySelector('.amap-screenshot').addEventListener('click', function () {\n                takeScreenshot();\n});\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br")])]),s("blockquote",[s("p",[n._v("❌ "),s("strong",[n._v("注意")]),n._v("：高德地图不存在 "),s("code",[n._v("AMap.Zoom")]),n._v(" 控件，缩放功能应通过 "),s("code",[n._v("AMap.ControlBar")]),n._v(" 实现。")])]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"_5️⃣-标记灵川县内地理坐标点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5️⃣-标记灵川县内地理坐标点"}},[n._v("#")]),n._v(" 5️⃣ 标记灵川县内地理坐标点")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('function addMarkers(points) {\n            points.forEach(item => {\n                const marker = new AMap.Marker({\n                    map: MapInfo,\n                    position: item.coord,\n                    title: item.name,\n                    label: {\n                        content: item.name,\n                        offset: new AMap.Pixel(0, -30)\n                    }\n                });\n\n                marker.on(\'click\', function () {\n                    showInfoWindow(item);\n                });\n            });\n\n        }\n        \n// 显示信息窗口\nfunction showInfoWindow(point) {\n            const infoWindow = new AMap.InfoWindow({\n                content: `<div style="padding:10px;min-width:150px;">\n            <h4 style="margin:0 0 5px 0;">${point.name}</h4>\n            <p style="margin:3px 0;">坐标: ${point.coord[0].toFixed(6)}, ${point.coord[1].toFixed(6)}</p>\n            <p style="margin:3px 0;">${point.description}</p>\n            <p style="margin:3px 0;color:#666;font-size:12px;">点击时间: ${new Date().toLocaleTimeString()}</p>\n        </div>`,\n                offset: new AMap.Pixel(0, -30)\n            });\n            infoWindow.open(MapInfo, point.coord);\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br")])]),s("blockquote",[s("p",[n._v("每个标记支持点击弹出详细信息窗口。")])]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"_6️⃣-添加3d地形墙效果-可选"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6️⃣-添加3d地形墙效果-可选"}},[n._v("#")]),n._v(" 6️⃣ 添加3D地形墙效果（可选）")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("const object3Dlayer = new AMap.Object3DLayer();\nconst wall = new AMap.Object3D.Wall({\n    path: boundaries[0],\n    height: -8000,\n    color: '#0478d7',\n    transparent: true\n});\nobject3Dlayer.add(wall);\nMapInfo.add(object3Dlayer);\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br")])]),s("blockquote",[s("p",[n._v("让边界区域呈现立体厚度效果，增强视觉冲击力。")])]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"_7️⃣-实现地图截图功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7️⃣-实现地图截图功能"}},[n._v("#")]),n._v(" 7️⃣ 实现地图截图功能")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("function takeScreenshot() {\n            // 尝试官方方法\n            if (MapInfo && MapInfo.getMapType) {\n                MapInfo.plugin(['AMap.MapType'], function () {\n                    if (AMap.MapType.prototype.getCanvas) {\n                        MapInfo.getMapType().getCanvas(function (canvas) {\n                            if (canvas && canvas.toDataURL) {\n                                try {\n                                    const dataURL = canvas.toDataURL('image/png');\n                                    downloadImage(dataURL);\n                                    return;\n                                } catch (e) {\n                                    console.warn('官方截图方法失败:', e);\n                                }\n                            }\n                            // 官方方法失败，尝试直接获取canvas\n                            tryDirectCanvasCapture();\n                        });\n                    }\n                });\n            } else {\n                tryDirectCanvasCapture();\n            }\n        }\n\n        function downloadImage(dataUrl) {\n            const link = document.createElement('a');\n            link.download = `地图截图_${new Date().getTime()}.png`;\n            link.href = dataUrl;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        }\n\n\n        // 直接获取canvas尝试\n        function tryDirectCanvasCapture() {\n            const canvas = document.querySelector('#AllmapContainer canvas');\n            if (canvas && canvas.toDataURL) {\n                try {\n                    const tempCanvas = document.createElement('canvas');\n                    tempCanvas.width = canvas.width;\n                    tempCanvas.height = canvas.height;\n                    tempCanvas.getContext('2d').drawImage(canvas, 0, 0);\n                    const dataURL = tempCanvas.toDataURL('image/png');\n                    downloadImage(dataURL);\n                    return;\n                } catch (e) {\n                    console.warn('直接canvas捕获失败:', e);\n                }\n            }\n\n            // 最终回退到html2canvas\n            if (window.html2canvas) {\n                takeAlternativeScreenshot();\n            } else {\n                alert('截图功能初始化失败，请刷新页面重试');\n            }\n        }\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br")])]),s("h4",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[n._v("#")])]),n._v(" "),s("hr"),n._v(" "),s("h2",{attrs:{id:"📌-四、常见错误与优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#📌-四、常见错误与优化"}},[n._v("#")]),n._v(" 📌 四、常见错误与优化")]),n._v(" "),s("table",[s("thead",[s("tr",[s("th",[n._v("问题")]),n._v(" "),s("th",[n._v("解决方案")])])]),n._v(" "),s("tbody",[s("tr",[s("td",[s("code",[n._v("AMap.Zoom is not a constructor")])]),n._v(" "),s("td",[n._v("改用 "),s("code",[n._v("AMap.ControlBar")]),n._v(" 实现缩放控件功能")])]),n._v(" "),s("tr",[s("td",[n._v("行政区划边界为空")]),n._v(" "),s("td",[n._v("确保城市名称、key正确，或更换新版本API测试")])]),n._v(" "),s("tr",[s("td",[n._v("截图黑屏或失败")]),n._v(" "),s("td",[n._v("优先使用Canvas截图，失败时用html2canvas作为备选")])])])]),n._v(" "),s("hr"),n._v(" "),s("h2",{attrs:{id:"🎉-五、项目总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🎉-五、项目总结"}},[n._v("#")]),n._v(" 🎉 五、项目总结")]),n._v(" "),s("p",[n._v("通过本文的完整讲解与关键代码，你可以实现：")]),n._v(" "),s("ul",[s("li",[n._v("县3D行政区划地图")]),n._v(" "),s("li",[n._v("多种控件与交互功能")]),n._v(" "),s("li",[n._v("自定义地图样式与地理标记")]),n._v(" "),s("li",[n._v("灵活的地图截图功能")])])])}),[],!1,null,null,null);s.default=e.exports}}]);