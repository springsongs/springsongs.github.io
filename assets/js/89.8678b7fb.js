(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{385:function(s,n,a){"use strict";a.r(n);var t=a(4),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"第三篇-如何用高德地图api获取灵川县乡镇定数数据显示"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三篇-如何用高德地图api获取灵川县乡镇定数数据显示"}},[s._v("#")]),s._v(" 第三篇，如何用高德地图API获取灵川县乡镇定数数据显示")]),s._v(" "),n("blockquote",[n("p",[s._v("作者："),n("a",{attrs:{href:"https://java.springsongs.cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("极光"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("本站地址："),n("a",{attrs:{href:"http://springsongs.cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://springsongs.cn"),n("OutboundLink")],1),s._v(" "),n("img",{staticClass:"lazy",attrs:{alt:"image-20250716112315142","data-src":"http://springsongs.cn/images/image-20250716112315142.png",loading:"lazy"}})])]),s._v(" "),n("p",[s._v("在项目开发中，如何快速在"),n("strong",[s._v("3D地图")]),s._v("上展示区域边界并批量标注多个定位点，是常见的需求。今天给大家分享如何基于"),n("strong",[s._v("高德地图 JS API")]),s._v("和"),n("strong",[s._v("Turf.js")]),s._v("，实战构建一个"),n("strong",[s._v("灵川县3D地图")]),s._v("，实现"),n("strong",[s._v("边界遮罩")]),s._v("和"),n("strong",[s._v("20个随机定位数据标注")]),s._v("。")]),s._v(" "),n("p",[s._v("本文完整示例，适合以下场景：")]),s._v(" "),n("ul",[n("li",[s._v("可视化乡镇或县域范围")]),s._v(" "),n("li",[s._v("随机生成模拟点位")]),s._v(" "),n("li",[s._v("标注信息点并显示标题")])]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"🎬-项目核心技术"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#🎬-项目核心技术"}},[s._v("#")]),s._v(" 🎬 项目核心技术")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("高德地图 JS API（v1.4.15）")])]),s._v(" "),n("li",[n("strong",[s._v("Turf.js")]),s._v("（用于后续几何计算）")]),s._v(" "),n("li",[s._v("纯前端实现，无需后端支持")])]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"🗺️-效果演示"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#🗺️-效果演示"}},[s._v("#")]),s._v(" 🗺️ 效果演示")]),s._v(" "),n("ul",[n("li",[s._v("灵川县完整行政边界遮罩")]),s._v(" "),n("li",[s._v("3D倾斜视角（具有地形厚度）")]),s._v(" "),n("li",[s._v("地图中批量生成20个"),n("strong",[s._v("随机分布")]),s._v("的"),n("strong",[s._v("定位点")])]),s._v(" "),n("li",[s._v("每个定位点带有"),n("strong",[s._v("标题标注")])])]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"🔥-核心实现步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#🔥-核心实现步骤"}},[s._v("#")]),s._v(" 🔥 核心实现步骤")]),s._v(" "),n("h3",{attrs:{id:"_1️⃣-初始化地图与边界遮罩"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1️⃣-初始化地图与边界遮罩"}},[s._v("#")]),s._v(" 1️⃣ 初始化地图与边界遮罩")]),s._v(" "),n("p",[s._v("通过 "),n("strong",[s._v("AMap.DistrictSearch")]),s._v(" 查询灵川县行政区数据，并提取边界：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<div id=\"AllmapContainer\"></div>\nlet MapInfo; // 全局地图实例\n// 初始化地图\nfunction initMap() {\n            const opts = {\n                subdistrict: 2,  // 获取乡镇级数据\n                extensions: 'all',\n                level: 'city'\n            };\n\n            // 查询灵川县及下属乡镇数据\n            const district = new AMap.DistrictSearch(opts);\n            district.search('灵川县', function (status, result) {\n                if (status !== 'complete' || !result.districtList[0]) {\n                    console.error('行政区查询失败');\n                    return;\n                }\n\n                const countyData = result.districtList[0];\n                const townships = countyData.districts || [];\n                const countyBounds = countyData.boundaries || [];\n\n                // 1. 创建3D地图（带灵川县边界遮罩）\n                create3DMap(countyBounds);\n\n            });\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("p",[s._v("设置边界遮罩，并添加3D倾斜和地形厚度效果：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 创建3D地图并设置遮罩\nfunction create3DMap(boundaries) {\n            MapInfo = new AMap.Map('AllmapContainer', {\n                mask: boundaries.map(boundary => [boundary]), // 设置遮罩区域\n                viewMode: '3D',\n                center: [110.4049, 25.28092],\n                zoom: 10.5,\n                pitch: 40, // 3D倾斜角度\n                layers: [\n                    new AMap.TileLayer.RoadNet(),\n                    new AMap.TileLayer.Satellite() // 卫星图层\n                ],\n                mapStyle: \"amap://styles/1111111111111111111111111111111111\" // 自定义样式\n            });\n\n            // 添加3D地形厚度效果（可选）\n            const object3Dlayer = new AMap.Object3DLayer();\n            MapInfo.add(object3Dlayer);\n            const wall = new AMap.Object3D.Wall({\n                path: boundaries[0], // 取第一条边界\n                height: -8000,\n                color: '#0478d7',\n                transparent: true\n            });\n            object3Dlayer.add(wall);\n            addMarkers(locationPoints);\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("hr"),s._v(" "),n("h3",{attrs:{id:"_2️⃣-随机生成-20-个模拟定位点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2️⃣-随机生成-20-个模拟定位点"}},[s._v("#")]),s._v(" 2️⃣ 随机生成 20 个模拟定位点")]),s._v(" "),n("p",[s._v("为了让地图更丰富，生成20个"),n("strong",[s._v("随机分布")]),s._v("的点：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("jsCopyEditconst locationPoints = Array.from({ length: 20 }, (_, i) => {\n  const randomLng = 110.40 + Math.random() * 0.2;\n  const randomLat = 25.26 + Math.random() * 0.2;\n  return {\n    name: `随机点${i + 1}`,\n    coord: [parseFloat(randomLng.toFixed(6)), parseFloat(randomLat.toFixed(6))]\n  };\n});\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("经纬度范围可以按实际区域灵活设置，以控制点位分布范围。")]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"_3️⃣-地图上批量标注显示标题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3️⃣-地图上批量标注显示标题"}},[s._v("#")]),s._v(" 3️⃣ 地图上批量标注显示标题")]),s._v(" "),n("p",[s._v("遍历生成的定位数据，在地图上添加"),n("strong",[s._v("标记点")]),s._v("与"),n("strong",[s._v("标题")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function addMarkers(points) {\n            points.forEach(item => {\n                new AMap.Marker({\n                    map: MapInfo,\n                    position: item.coord,\n                    title: item.name, // 悬停显示标题\n                    label: {\n                        content: item.name, // 标注标题\n                        offset: new AMap.Pixel(0, -30) // 标题偏移\n                    }\n                });\n            });\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("注意：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("title")]),s._v("：鼠标悬停显示")]),s._v(" "),n("li",[n("code",[s._v("label.content")]),s._v("：点位上方直接显示标题")])]),s._v(" "),n("p",[s._v("在地图创建完成后调用：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("addMarkers(locationPoints);\n\n// 页面加载后初始化\nwindow.onload = initMap;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("hr"),s._v(" "),n("h2",{attrs:{id:"📌-小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#📌-小结"}},[s._v("#")]),s._v(" 📌 小结")]),s._v(" "),n("blockquote",[n("p",[s._v("本文实战展示了如何基于高德地图实现：")]),s._v(" "),n("ul",[n("li",[s._v("灵川县边界遮罩")]),s._v(" "),n("li",[s._v("3D地图+地形厚度")]),s._v(" "),n("li",[s._v("随机定位点批量标注")]),s._v(" "),n("li",[s._v("支持标题显示与鼠标提示")])])]),s._v(" "),n("p",[s._v("无需后端，仅用纯前端代码即可轻松完成区域数据的可视化展示，非常适合城市规划、旅游地图、行政区数据分析等场景。")])])}),[],!1,null,null,null);n.default=e.exports}}]);